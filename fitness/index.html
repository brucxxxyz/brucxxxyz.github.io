<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ’ª ä»Šæ—¥å¥èº«æ¨è</title>

<style>
body{
    font-family:-apple-system,BlinkMacSystemFont,"PingFang SC",Arial;
    background:#f7f7f7;
    margin:0;
    padding:16px;
    color:#222;
}
h1{font-size:26px;margin-bottom:6px;}
.subtitle{color:#666;margin-bottom:16px;}
label{display:block;margin:8px 0 4px;}
input,button{
    width:100%;
    padding:12px;
    font-size:17px;
    border-radius:10px;
    border:1px solid #ccc;
}
button{
    background:#007aff;
    color:#fff;
    border:none;
    margin-top:10px;
}
button.secondary{background:#e5e5ea;color:#000;}
button.danger{background:#ff3b30;}
.card{
    background:#fff;
    border-radius:14px;
    padding:16px;
    margin:14px 0;
    box-shadow:0 2px 8px rgba(0,0,0,.05);
}
.item{margin:6px 0;font-size:16px;}
.nav{
    margin-bottom:16px;
    font-size:15px;
}
.nav a{text-decoration:none;color:#007aff;}
.footer{
    margin-top:40px;
    text-align:center;
    font-size:14px;
    color:#999;
    padding-bottom:20px;
}
.badge{
    display:inline-block;
    padding:4px 10px;
    border-radius:12px;
    font-size:13px;
    margin-left:6px;
    background:#e5e5ea;
}
</style>
</head>

<body>

<div class="nav">
  <a href="/">ğŸ  é¦–é¡µ</a> Â·
  <a href="/breakfast/">ğŸ³ æ—©é¤</a> Â·
  <a href="/play/">ğŸ—º æ¸¸ç©</a> Â·
  <a href="/fitness/">ğŸ’ª å¥èº«</a>
</div>

<h1>ğŸ’ª ä»Šæ—¥å¥èº«æ¨è</h1>
<div class="subtitle">ä½å¼ºåº¦ Â· ä¸çº ç»“ Â· åœ¨å®¶å°±ç»ƒ</div>

<label>ğŸ‘¤ å¤§å</label>
<input id="name" placeholder="è¯·è¾“å…¥ä½ çš„åå­—">

<label>ğŸ“… é€‰æ‹©æ—¥æœŸ</label>
<input id="date" type="date">

<button onclick="generate()">ğŸ”¥ å¼€å§‹å¥èº«</button>

<div id="options"></div>
<div id="final"></div>
<div id="historyBox"></div>

<button class="secondary" onclick="showHistory()">ğŸ“œ æŸ¥çœ‹å†å²</button>
<button class="danger" onclick="clearHistory()">ğŸ§¹ æ¸…é™¤å†å²</button>

<script>
/* ========= åŠ¨ä½œæ•°æ® ========= */
const exercises = [
    {name:"ç«™å§¿æè†æ”¶è…¹", level:"ä½", kcal:60, time:10},
    {name:"åŸåœ°æ‘†è‡‚å¿«èµ°", level:"ä½", kcal:70, time:10},
    {name:"ç«™å§¿ä¾§æŠ¬è…¿", level:"ä½", kcal:50, time:10},

    {name:"å¾’æ‰‹æ·±è¹²", level:"ä¸­", kcal:90, time:12},
    {name:"ç«™å§¿æ‹³å‡»ï¼ˆæŠ€æœ¯+å‘¼å¸ï¼‰", level:"ä¸­", kcal:100, time:12},
    {name:"ç«™å§¿è½¬ä½“", level:"ä¸­", kcal:80, time:10},

    {name:"æ³¢æ¯”ç®€åŒ–ç‰ˆï¼ˆä¸è·³ï¼‰", level:"åé«˜", kcal:120, time:12},
    {name:"åŸåœ°é«˜æŠ¬è…¿ï¼ˆæ…¢é€Ÿï¼‰", level:"åé«˜", kcal:130, time:12}
];

function rand(arr){return arr[Math.floor(Math.random()*arr.length)];}

/* ========= ç”Ÿæˆæ–¹æ¡ˆ ========= */
function makePlan(){
    const plan=[];
    let kcal=0;
    for(let i=0;i<3;i++){
        const e=rand(exercises);
        plan.push(e);
        kcal+=e.kcal;
    }
    return {plan,kcal};
}

/* ========= é€»è¾‘ ========= */
function generate(){
    const name=document.getElementById("name").value.trim();
    if(!name){alert("è¯·å…ˆè¾“å…¥å¤§å");return;}

    document.getElementById("options").innerHTML="â³ æ­£åœ¨ç”Ÿæˆè®­ç»ƒè®¡åˆ’...";
    document.getElementById("final").innerHTML="";
    document.getElementById("historyBox").innerHTML="";

    setTimeout(()=>{
        const box=document.getElementById("options");
        box.innerHTML="";
        for(let i=0;i<3;i++){
            const p=makePlan();
            const div=document.createElement("div");
            div.className="card";
            div.innerHTML=`
                <strong>æ–¹æ¡ˆ ${i+1}</strong>
                ${p.plan.map(x=>`
                    <div class="item">
                        ğŸ‹ï¸ ${x.name}
                        <span class="badge">å¼ºåº¦ ${x.level}</span>
                        <span class="badge">${x.kcal} kcal</span>
                    </div>
                `).join("")}
                <div class="item">ğŸ”¥ é¢„è®¡æ¶ˆè€— ${p.kcal} kcal</div>
                <button onclick='choose(${JSON.stringify(p)}, "${name}")'>é€‰æ‹©è¿™ä¸ª</button>
            `;
            box.appendChild(div);
        }
    },1000);
}

function choose(p,name){
    const h=JSON.parse(localStorage.getItem("fitnessHistory")||"[]");
    h.push({date:new Date().toLocaleDateString(),name,plan:p});
    localStorage.setItem("fitnessHistory",JSON.stringify(h));

    document.getElementById("options").innerHTML="";
    document.getElementById("final").innerHTML=`
        <div class="card">
            <strong>âœ… ä»Šæ—¥å¥èº«</strong>
            ${p.plan.map(x=>`
                <div class="item">
                    ğŸ‹ï¸ ${x.name}
                    <span class="badge">å¼ºåº¦ ${x.level}</span>
                    <span class="badge">${x.kcal} kcal</span>
                </div>
            `).join("")}
            <div class="item">ğŸ”¥ æ€»æ¶ˆè€— ${p.kcal} kcal</div>
        </div>
    `;
}

function showHistory(){
    const box=document.getElementById("historyBox");
    const h=JSON.parse(localStorage.getItem("fitnessHistory")||"[]");
    box.innerHTML="";
    if(!h.length){
        box.innerHTML='<div class="card">æš‚æ— å†å²è®°å½•</div>';
        return;
    }
    h.forEach(x=>{
        box.innerHTML+=`
            <div class="card">
                <strong>${x.date} Â· ${x.name}</strong>
                ${x.plan.plan.map(p=>`
                    <div class="item">
                        ğŸ‹ï¸ ${p.name}
                        <span class="badge">å¼ºåº¦ ${p.level}</span>
                        <span class="badge">${p.kcal} kcal</span>
                    </div>
                `).join("")}
                <div class="item">ğŸ”¥ ${x.plan.kcal} kcal</div>
            </div>
        `;
    });
}

function clearHistory(){
    if(confirm("ç¡®å®šæ¸…é™¤æ‰€æœ‰å¥èº«å†å²ï¼Ÿ")){
        localStorage.removeItem("fitnessHistory");
        document.getElementById("historyBox").innerHTML="";
    }
}

document.getElementById("date").value=new Date().toISOString().slice(0,10);
</script>

<footer class="footer">
   â€” Designed by BY â€”
</footer>

</body>
</html>
