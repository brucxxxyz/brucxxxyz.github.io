<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ  ä»Šæ—¥è®­ç»ƒ</title>

<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", Arial;
    background: #f7f7f7;
    margin: 0;
    padding: 16px;
    color: #222;
}

h1 {
    font-size: 26px;
    margin-bottom: 6px;
}

.subtitle {
    font-size: 16px;
    color: #666;
    margin-bottom: 16px;
}

label {
    display: block;
    font-size: 16px;
    margin: 6px 0 4px;
    color: #555;
}

/* æ‰€æœ‰è¾“å…¥æ¡†ï¼ŒåŒ…æ‹¬æ—¥æœŸé€‰æ‹© */
input {
    width: 100%;
    padding: 12px;
    font-size: 18px;
    margin-bottom: 10px;
    border-radius: 10px;
    border: 1px solid #ccc;
    background: #fff;
    color: #222;
    -webkit-appearance: none; /* å»æ‰iOSé»˜è®¤ç°è‰²æ ·å¼ */
    -moz-appearance: none;
    appearance: none;
}

/* æ—¥æœŸé€‰æ‹©å™¨å›¾æ ‡å¯ä¿æŒé»˜è®¤ */
input[type="date"]::-webkit-calendar-picker-indicator {
    cursor: pointer;
}

/* å¡ç‰‡æ ·å¼ */
.card {
    background: #fff;
    border-radius: 14px;
    padding: 16px;
    margin-bottom: 14px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.item {
    font-size: 18px;
    margin: 6px 0;
}

.kcal {
    font-size: 15px;
    color: #555;
    margin-top: 6px;
}

/* æŒ‰é’®æ ·å¼ */
button {
    width: 100%;
    padding: 14px;
    margin-top: 10px;
    font-size: 18px;
    border-radius: 12px;
    border: none;
    background: #007aff;
    color: #fff;
}

button.secondary {
    background: #e5e5ea;
    color: #000;
}

button.danger {
    background: #ff3b30;
}

footer {
    margin-top: 40px;
    text-align: center;
    font-size: 14px;
    color: #999;
}
</style>
</head>

<body>

<div style="margin-bottom:16px;font-size:15px;">
  <a href="https://brucxxxyz.github.io/">ğŸ  é¦–é¡µ</a> Â·
  <a href="/breakfast/">ğŸ³ æ—©é¤</a> Â·
  <a href="/play/">ğŸ—º æ¸¸ç©</a> Â·
  <a href="/fitness/">ğŸ’ª å¥èº«</a>
</div>


<div class="nav">
    <a href="https://brucxxxyz.github.io/">â† é¦–é¡µ</a>
    <span>
        <a href="https://brucxxxyz.github.io/breakfast/">æ—©é¤</a> Â·
        <a href="https://brucxxxyz.github.io/play/">æ¸¸ç©</a> Â·
        <a href="https://brucxxxyz.github.io/fitness/">å¥èº«</a>
    </span>
</div>


<h1>ğŸ  ä»Šæ—¥å±…å®¶è®­ç»ƒ</h1>
<div class="subtitle">ç®€å• Â· ä¸ä¸‹åœ° Â· å«æ‹³å‡»</div>

<label>ğŸ‘¤ å¤§å</label>
<input id="name" placeholder="è¯·è¾“å…¥ä½ çš„åå­—">

<label>ğŸ“… æ—¥æœŸ</label>
<input id="date" type="date">

<button onclick="generate()">ğŸ’ª æ¨èè®­ç»ƒ</button>

<div id="options"></div>
<div id="final"></div>
<div id="historyBox"></div>

<button class="secondary" onclick="showHistory()">ğŸ“œ æŸ¥çœ‹å†å²</button>
<button class="danger" onclick="clearHistory()">ğŸ§¹ æ¸…é™¤å†å²</button>

<script>
// ========= åŸºå‡† =========
const BASE_KCAL = 180;

// ========= è®­ç»ƒåˆ†ç±» =========
const workouts = {
    "çƒ­èº«": [
        {name:"åŸåœ°è¸æ­¥ 5 åˆ†é’Ÿ",k:30},
        {name:"è‚©é¢ˆæ´»åŠ¨",k:20},
        {name:"åŠ¨æ€æ‹‰ä¼¸",k:25}
    ],
    "åŠ›é‡": [
        {name:"ç«™å§¿æ·±è¹²",k:60},
        {name:"é å¢™ä¿¯å§æ’‘",k:50},
        {name:"ç«™å§¿æè†æ”¶è…¹",k:55}
    ],
    "æ‹³å‡»": [
        {name:"åŸºç¡€ç›´æ‹³ç»„åˆ",k:70},
        {name:"å½±å­æ‹³å‡»",k:65},
        {name:"å‘¼å¸èŠ‚å¥å‡ºæ‹³",k:60}
    ],
    "å°å™¨æ¢°": [
        {name:"å¼¹åŠ›å¸¦æ‹‰ä¼¸",k:50},
        {name:"å“‘é“ƒè½»é‡é‡",k:60},
        {name:"å£¶é“ƒæ‘†åŠ¨ï¼ˆè½»ï¼‰",k:70}
    ],
    "æ”¾æ¾": [
        {name:"ç«™å§¿æ‹‰ä¼¸",k:25},
        {name:"è‚©èƒŒæ”¾æ¾",k:20},
        {name:"å‘¼å¸æ”¾æ¾",k:15}
    ]
};

// ========= å·¥å…· =========
function rand(arr){return arr[Math.floor(Math.random()*arr.length)];}

function diffText(d){
    if(d > 40) return "ğŸ’ª ä»Šå¤©ç¨æœ‰æŒ‘æˆ˜";
    if(d > 10) return "ğŸ™‚ çŠ¶æ€ä¸é”™";
    if(d >= -10) return "âœ… åˆšåˆšå¥½";
    return "ğŸŒ¿ æ”¾æ¾æ¢å¤";
}

function makeWorkout(){
    const cats = Object.keys(workouts)
        .sort(()=>0.5-Math.random())
        .slice(0,3);

    const points = cats.map(c=>{
        const p = rand(workouts[c]);
        return {...p,category:c};
    });

    const total = points.reduce((s,x)=>s+x.k,0);
    return {
        points,
        total,
        diff: total - BASE_KCAL
    };
}

// ========= ä¸»æµç¨‹ =========
function generate(){
    const name=document.getElementById("name").value.trim();
    if(!name){alert("è¯·å…ˆè¾“å…¥å¤§å");return;}

    document.getElementById("options").innerHTML="â³ æ­£åœ¨ä¸ºä½ å®‰æ’è®­ç»ƒ...";
    document.getElementById("final").innerHTML="";
    document.getElementById("historyBox").innerHTML="";

    setTimeout(()=>{
        const box=document.getElementById("options");
        box.innerHTML="";
        for(let i=0;i<3;i++){
            const w=makeWorkout();
            const card=document.createElement("div");
            card.className="card";
            card.innerHTML=`
                <h3>æ–¹æ¡ˆ ${i+1}</h3>
                ${w.points.map(p=>`
                    <div class="item">ğŸ· ${p.category} Â· ${p.name}</div>
                `).join("")}
                <div class="kcal">
                    âš¡ ${w.total} kcal Â· 
                    ğŸ”¥ å¼ºåº¦å·® ${w.diff>0?"+":""}${w.diff}
                    <br>${diffText(w.diff)}
                </div>
                <button onclick='choose(${JSON.stringify(w)}, "${name}")'>
                    é€‰æ‹©è¿™ä¸ª
                </button>
            `;
            box.appendChild(card);
        }
    },3000);
}

function choose(w,name){
    const h=JSON.parse(localStorage.getItem("fitnessHistory")||"[]");
    h.push({
        date:new Date().toLocaleDateString(),
        name,
        workout:w
    });
    localStorage.setItem("fitnessHistory",JSON.stringify(h));

    document.getElementById("options").innerHTML="";
    document.getElementById("final").innerHTML=`
        <div class="card">
            <h2>âœ… ä»Šæ—¥è®­ç»ƒ</h2>
            ${w.points.map(p=>`
                <div class="item">ğŸ· ${p.category} Â· ${p.name}</div>
            `).join("")}
            <div class="kcal">
                âš¡ ${w.total} kcal Â· 
                ğŸ”¥ å¼ºåº¦å·® ${w.diff>0?"+":""}${w.diff}
                <br>${diffText(w.diff)}
            </div>
        </div>
    `;
}

function showHistory(){
    const box=document.getElementById("historyBox");
    const h=JSON.parse(localStorage.getItem("fitnessHistory")||"[]");
    box.innerHTML="";
    if(!h.length){
        box.innerHTML="<div class='card'>æš‚æ— å†å²è®°å½•</div>";
        return;
    }
    h.forEach(x=>{
        box.innerHTML+=`
            <div class="card">
                <div class="item"><strong>${x.date}</strong> Â· ${x.name}</div>
                ${x.workout.points.map(p=>`
                    <div class="item">ğŸ· ${p.category} Â· ${p.name}</div>
                `).join("")}
                <div class="kcal">
                    âš¡ ${x.workout.total} kcal Â·
                    ğŸ”¥ ${x.workout.diff>0?"+":""}${x.workout.diff}
                </div>
            </div>
        `;
    });
}

function clearHistory(){
    if(confirm("ç¡®å®šæ¸…é™¤æ‰€æœ‰å¥èº«è®°å½•å—ï¼Ÿ")){
        localStorage.removeItem("fitnessHistory");
        document.getElementById("historyBox").innerHTML="";
        alert("ğŸ§¹ å·²æ¸…é™¤");
    }
}

// é»˜è®¤æ—¥æœŸ = ä»Šå¤©
document.getElementById("date").value =
    new Date().toISOString().slice(0,10);
</script>

<footer style="
    margin-top:48px;
    text-align:center;
    font-size:13px;
    color:#aaa;
    letter-spacing:0.5px;
    padding-bottom:24px;
">
    â€” Designed by BY â€”
</footer>
    
</body>
</html>
