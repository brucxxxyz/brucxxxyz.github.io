<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ³ ä»Šæ—¥æ—©é¤æ¨è</title>

<style>
body{
    font-family:-apple-system,BlinkMacSystemFont,"PingFang SC",Arial;
    background:#f7f7f7;
    margin:0;
    padding:16px;
    color:#222;
}
h1{font-size:26px;margin-bottom:6px;}
.subtitle{color:#666;margin-bottom:16px;}
label{display:block;margin:8px 0 4px;}
input,button{
    width:100%;
    padding:12px;
    font-size:17px;
    border-radius:10px;
    border:1px solid #ccc;
    background:#fff;
}
button{
    background:#007aff;
    color:#fff;
    border:none;
    margin-top:10px;
}
button.secondary{background:#e5e5ea;color:#000;}
button.danger{background:#ff3b30;}
.card{
    background:#fff;
    border-radius:14px;
    padding:16px;
    margin:14px 0;
    box-shadow:0 2px 8px rgba(0,0,0,.05);
}
.item{margin:6px 0;font-size:16px;}
.nutrition{font-size:14px;color:#555;margin-top:6px;}
.nav{
    margin-bottom:16px;
    font-size:15px;
}
.nav a{text-decoration:none;color:#007aff;}
.footer{
    margin-top:40px;
    text-align:center;
    font-size:14px;
    color:#999;
    padding-bottom:20px;
}
</style>
</head>

<body>

<div class="nav">
  <a href="/">ğŸ  é¦–é¡µ</a> Â·
  <a href="/breakfast/">ğŸ³ æ—©é¤</a> Â·
  <a href="/play/">ğŸ—º æ¸¸ç©</a> Â·
  <a href="/fitness/">ğŸ’ª å¥èº«</a>
</div>

<h1>ğŸ³ ä»Šæ—¥æ—©é¤æ¨è</h1>
<div class="subtitle">ç®€å• Â· æ¸…æ™° Â· ä¸çº ç»“</div>

<label>ğŸ‘¤ å¤§å</label>
<input id="name" placeholder="è¯·è¾“å…¥ä½ çš„åå­—">

<label>ğŸ“… é€‰æ‹©æ—¥æœŸ</label>
<input id="date" type="date">

<button onclick="generate()">ğŸ³ æ¨èæ—©é¤</button>

<div id="options"></div>
<div id="final"></div>
<div id="historyBox"></div>

<button class="secondary" onclick="showHistory()">ğŸ“œ æŸ¥çœ‹å†å²</button>
<button class="danger" onclick="clearHistory()">ğŸ§¹ æ¸…é™¤å†å²</button>

<script>
/* ========= æ—©é¤æ•°æ®ï¼ˆå«è¥å…»ï¼‰ ========= */
const drinks=[
 {name:"è±†æµ†",k:80,p:7,c:8,f:3},
 {name:"æ¸©ç‰›å¥¶",k:120,p:8,c:12,f:5},
 {name:"ç‡•éº¦å¥¶",k:110,p:3,c:16,f:4},
 {name:"é»‘å’–å•¡",k:10,p:1,c:1,f:0},
 {name:"ç»¿èŒ¶",k:0,p:0,c:0,f:0},
 {name:"æ¸©æ°´",k:0,p:0,c:0,f:0}
];
const staples=[
 {name:"å…¨éº¦åå¸",k:160,p:6,c:28,f:2},
 {name:"å°é¦’å¤´",k:180,p:5,c:35,f:1},
 {name:"å³é£Ÿç‡•éº¦",k:150,p:5,c:27,f:3},
 {name:"ç™½ç²¥ / å°ç±³ç²¥",k:120,p:3,c:26,f:0},
 {name:"é¸¡è›‹ï¼ˆç…®/è’¸ï¼‰",k:90,p:7,c:1,f:6},
 {name:"é¸¡è›‹ä¸‰æ˜æ²»",k:250,p:12,c:30,f:8}
];
const desserts=[
 {name:"æ°´æœ",k:80,p:1,c:20,f:0},
 {name:"åŸå‘³é…¸å¥¶",k:120,p:6,c:12,f:4},
 {name:"åšæœä¸€å°æŠŠ",k:100,p:3,c:4,f:8},
 {name:"çº¢è±† / ç»¿è±†",k:110,p:4,c:22,f:1},
 {name:"ç‰ç±³ / çº¢è–¯",k:130,p:2,c:30,f:0},
 {name:"ä¸åƒç”œç‚¹",k:0,p:0,c:0,f:0}
];

function rand(arr){return arr[Math.floor(Math.random()*arr.length)];}

function makeMeal(){
    const d=rand(drinks);
    const s=rand(staples);
    const de=rand(desserts);
    return{
        d,s,de,
        total:{
            kcal:d.k+s.k+de.k,
            p:d.p+s.p+de.p,
            c:d.c+s.c+de.c,
            f:d.f+s.f+de.f
        }
    };
}

/* ========= é€»è¾‘ ========= */
function generate(){
    const name=document.getElementById("name").value.trim();
    if(!name){alert("è¯·å…ˆè¾“å…¥å¤§å");return;}

    document.getElementById("options").innerHTML="â³ æ­£åœ¨å‡†å¤‡æ—©é¤...";
    document.getElementById("final").innerHTML="";
    document.getElementById("historyBox").innerHTML="";

    setTimeout(()=>{
        const box=document.getElementById("options");
        box.innerHTML="";
        for(let i=0;i<3;i++){
            const m=makeMeal();
            const div=document.createElement("div");
            div.className="card";
            div.innerHTML=`
                <strong>é€‰é¡¹ ${i+1}</strong>
                <div class="item">ğŸ¥¤ ${m.d.name}</div>
                <div class="item">ğŸ ${m.s.name}</div>
                <div class="item">ğŸ® ${m.de.name}</div>
                <div class="nutrition">
                    ğŸ”¥ ${m.total.kcal} kcal Â·
                    ğŸ¥š ${m.total.p}g Â·
                    ğŸ ${m.total.c}g Â·
                    ğŸ§ˆ ${m.total.f}g
                </div>
                <button onclick='choose(${JSON.stringify(m)}, "${name}")'>é€‰æ‹©è¿™ä¸ª</button>
            `;
            box.appendChild(div);
        }
    },800);
}

function choose(m,name){
    const h=JSON.parse(localStorage.getItem("breakfastHistory")||"[]");
    h.push({date:new Date().toLocaleDateString(),name,meal:m});
    localStorage.setItem("breakfastHistory",JSON.stringify(h));

    document.getElementById("options").innerHTML="";
    document.getElementById("final").innerHTML=`
        <div class="card">
            <strong>âœ… ä»Šæ—¥æ—©é¤</strong>
            <div class="item">ğŸ¥¤ ${m.d.name}</div>
            <div class="item">ğŸ ${m.s.name}</div>
            <div class="item">ğŸ® ${m.de.name}</div>
            <div class="nutrition">
                ğŸ”¥ ${m.total.kcal} kcal Â·
                ğŸ¥š ${m.total.p}g Â·
                ğŸ ${m.total.c}g Â·
                ğŸ§ˆ ${m.total.f}g
            </div>
        </div>
    `;
}

function showHistory(){
    const box=document.getElementById("historyBox");
    const h=JSON.parse(localStorage.getItem("breakfastHistory")||"[]");
    box.innerHTML="";
    if(!h.length){
        box.innerHTML='<div class="card">æš‚æ— å†å²è®°å½•</div>';
        return;
    }
    h.forEach(x=>{
        box.innerHTML+=`
            <div class="card">
                <strong>${x.date} Â· ${x.name}</strong>
                <div class="item">ğŸ¥¤ ${x.meal.d.name}</div>
                <div class="item">ğŸ ${x.meal.s.name}</div>
                <div class="item">ğŸ® ${x.meal.de.name}</div>
                <div class="nutrition">ğŸ”¥ ${x.meal.total.kcal} kcal</div>
            </div>
        `;
    });
}

function clearHistory(){
    if(confirm("ç¡®å®šæ¸…é™¤æ‰€æœ‰æ—©é¤å†å²ï¼Ÿ")){
        localStorage.removeItem("breakfastHistory");
        document.getElementById("historyBox").innerHTML="";
    }
}

document.getElementById("date").value=new Date().toISOString().slice(0,10);
</script>

<footer style="
    margin-top:40px;
    text-align:center;
    font-size:14px;
    color:#999;
    padding-bottom:20px;
">
<footer>â€” Designed by BY â€”</footer>

</body>
</html>
