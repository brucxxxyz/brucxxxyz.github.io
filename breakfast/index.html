<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>ğŸ³ ä»Šæ—¥æ—©é¤</title>

<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", Arial;
    background: #f7f7f7;
    margin: 0;
    padding: 16px;
    color: #222;
}

h1 {
    font-size: 26px;
    margin-bottom: 6px;
}

.subtitle {
    font-size: 16px;
    color: #666;
    margin-bottom: 16px;
}

label {
    display: block;
    font-size: 16px;
    margin: 6px 0 4px;
    color: #555;
}

input {
    width: 100%;
    padding: 12px;
    font-size: 18px;
    margin-bottom: 10px;
    border-radius: 10px;
    border: 1px solid #ccc;
    background: #fff;
}

.card {
    background: #fff;
    border-radius: 14px;
    padding: 16px;
    margin-bottom: 14px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.item {
    font-size: 18px;
    margin: 6px 0;
}

.nutrition {
    font-size: 15px;
    color: #555;
    margin-top: 6px;
}

button {
    width: 100%;
    padding: 14px;
    margin-top: 10px;
    font-size: 18px;
    border-radius: 12px;
    border: none;
    background: #007aff;
    color: #fff;
}

button.secondary {
    background: #e5e5ea;
    color: #000;
}

button.danger {
    background: #ff3b30;
}
</style>
</head>

<body>

<div style="margin-bottom:16px;font-size:15px;">
  <a href="https://brucxxxyz.github.io/">ğŸ  é¦–é¡µ</a> Â·
  <a href="/breakfast/">ğŸ³ æ—©é¤</a> Â·
  <a href="/play/">ğŸ—º æ¸¸ç©</a> Â·
  <a href="/fitness/">ğŸ’ª å¥èº«</a>
</div>


<div class="nav">
    <a href="https://brucxxxyz.github.io/">â† é¦–é¡µ</a>
    <span>
        <a href="https://brucxxxyz.github.io/breakfast/">æ—©é¤</a> Â·
        <a href="https://brucxxxyz.github.io/play/">æ¸¸ç©</a> Â·
        <a href="https://brucxxxyz.github.io/fitness/">å¥èº«</a>
    </span>
</div>


<h1>ğŸ³ ä»Šæ—¥æ—©é¤æ¨è</h1>
<div class="subtitle">ç®€å• Â· æ¸…æ™° Â· ä¸çº ç»“</div>

<label>ğŸ‘¤ å¤§å</label>
<input id="name" placeholder="è¯·è¾“å…¥ä½ çš„åå­—">

<label>ğŸ“… é€‰æ‹©æ—¥æœŸ</label>
<input id="date" type="date">

<button onclick="generate()">ğŸ³ æ¨èæ—©é¤</button>

<div id="options"></div>
<div id="final"></div>
<div id="historyBox"></div>

<button class="secondary" onclick="showHistory()">ğŸ“œ æŸ¥çœ‹å†å²</button>
<button class="danger" onclick="clearHistory()">ğŸ§¹ æ¸…é™¤å†å²</button>

<script>
// ===== æ—©é¤æ•°æ®ï¼ˆå«è¥å…»ï¼‰=====
const drinks = [
 {name:"è±†æµ†",k:80,p:7,c:8,f:3},
 {name:"æ¸©ç‰›å¥¶",k:120,p:8,c:12,f:5},
 {name:"ç‡•éº¦å¥¶",k:110,p:3,c:16,f:4},
 {name:"é»‘å’–å•¡",k:10,p:1,c:1,f:0},
 {name:"ç»¿èŒ¶",k:0,p:0,c:0,f:0},
 {name:"æ¸©æ°´",k:0,p:0,c:0,f:0}
];

const staples = [
 {name:"å…¨éº¦åå¸",k:160,p:6,c:28,f:2},
 {name:"å°é¦’å¤´",k:180,p:5,c:35,f:1},
 {name:"å³é£Ÿç‡•éº¦",k:150,p:5,c:27,f:3},
 {name:"ç™½ç²¥ / å°ç±³ç²¥",k:120,p:3,c:26,f:0},
 {name:"é¸¡è›‹ï¼ˆç…®/è’¸ï¼‰",k:90,p:7,c:1,f:6},
 {name:"é¸¡è›‹ä¸‰æ˜æ²»",k:250,p:12,c:30,f:8}
];

const desserts = [
 {name:"æ°´æœ",k:80,p:1,c:20,f:0},
 {name:"åŸå‘³é…¸å¥¶",k:120,p:6,c:12,f:4},
 {name:"åšæœä¸€å°æŠŠ",k:100,p:3,c:4,f:8},
 {name:"çº¢è±† / ç»¿è±†",k:110,p:4,c:22,f:1},
 {name:"ç‰ç±³ / çº¢è–¯",k:130,p:2,c:30,f:0},
 {name:"ä¸åƒç”œç‚¹",k:0,p:0,c:0,f:0}
];

function rand(arr){
    return arr[Math.floor(Math.random() * arr.length)];
}

function makeMeal(){
    const d = rand(drinks);
    const s = rand(staples);
    const de = rand(desserts);
    return {
        d, s, de,
        total: {
            kcal: d.k + s.k + de.k,
            p: d.p + s.p + de.p,
            c: d.c + s.c + de.c,
            f: d.f + s.f + de.f
        }
    };
}

function generate(){
    const name = document.getElementById("name").value.trim();
    const date = document.getElementById("date").value;

    if(!name){
        alert("è¯·å…ˆè¾“å…¥å¤§å");
        return;
    }

    document.getElementById("options").innerHTML = "â³ æ­£åœ¨ä¸ºä½ å‡†å¤‡æ—©é¤...";
    document.getElementById("final").innerHTML = "";
    document.getElementById("historyBox").innerHTML = "";

    setTimeout(() => {
        const box = document.getElementById("options");
        box.innerHTML = "";
        for(let i = 0; i < 3; i++){
            const m = makeMeal();
            const card = document.createElement("div");
            card.className = "card";
            card.innerHTML = `
                <h3>é€‰é¡¹ ${i+1}</h3>
                <div class="item">ğŸ¥¤ ${m.d.name}</div>
                <div class="item">ğŸ ${m.s.name}</div>
                <div class="item">ğŸ® ${m.de.name}</div>
                <div class="nutrition">
                    ğŸ”¥ ${m.total.kcal} kcal Â·
                    ğŸ¥š ${m.total.p}g Â·
                    ğŸ ${m.total.c}g Â·
                    ğŸ§ˆ ${m.total.f}g
                </div>
                <button onclick='choose(${JSON.stringify(m)}, "${name}", "${date}")'>
                    é€‰æ‹©è¿™ä¸ª
                </button>
            `;
            box.appendChild(card);
        }
    }, 3000);
}

function choose(meal, name, date){
    const history = JSON.parse(localStorage.getItem("breakfastHistory") || "[]");
    history.push({ name, date, meal });
    localStorage.setItem("breakfastHistory", JSON.stringify(history));

    document.getElementById("options").innerHTML = "";
    document.getElementById("final").innerHTML = `
        <div class="card">
            <h2>âœ… ä»Šæ—¥æ—©é¤</h2>
            <div class="item">ğŸ¥¤ ${meal.d.name}</div>
            <div class="item">ğŸ ${meal.s.name}</div>
            <div class="item">ğŸ® ${meal.de.name}</div>
            <div class="nutrition">
                ğŸ”¥ ${meal.total.kcal} kcal Â·
                ğŸ¥š ${meal.total.p}g Â·
                ğŸ ${meal.total.c}g Â·
                ğŸ§ˆ ${meal.total.f}g
            </div>
        </div>
    `;
}

function showHistory(){
    const box = document.getElementById("historyBox");
    const history = JSON.parse(localStorage.getItem("breakfastHistory") || "[]");
    box.innerHTML = "";

    if(!history.length){
        box.innerHTML = "<div class='card'>æš‚æ— å†å²è®°å½•</div>";
        return;
    }

    history.forEach(h => {
        box.innerHTML += `
            <div class="card">
                <div class="item"><strong>${h.date}</strong> Â· ${h.name}</div>
                <div class="item">ğŸ¥¤ ${h.meal.d.name}</div>
                <div class="item">ğŸ ${h.meal.s.name}</div>
                <div class="item">ğŸ® ${h.meal.de.name}</div>
                <div class="nutrition">ğŸ”¥ ${h.meal.total.kcal} kcal</div>
            </div>
        `;
    });
}

function clearHistory(){
    if(confirm("ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ—©é¤å†å²è®°å½•å—ï¼Ÿ")){
        localStorage.removeItem("breakfastHistory");
        document.getElementById("historyBox").innerHTML = "";
        alert("ğŸ§¹ å†å²è®°å½•å·²æ¸…é™¤");
    }
}

// é»˜è®¤æ—¥æœŸ = ä»Šå¤©ï¼ˆè§£å†³ iOS çœ‹ä¸åˆ°æ—¥æœŸçš„é—®é¢˜ï¼‰
document.getElementById("date").value =
    new Date().toISOString().slice(0,10);
</script>

<footer style="
    margin-top:48px;
    text-align:center;
    font-size:13px;
    color:#aaa;
    letter-spacing:0.5px;
    padding-bottom:24px;
">
    â€” Designed by BY â€”
</footer>
    
</body>
</html>
